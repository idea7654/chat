# Webチャットアプリ（サーバー）

> Webチャットアプリのサーバーの仕様

## API一覧(略Ver.)

| No.  | 種別 | API名  | 機能概要                           |
| ---- | ---- | ------ | ---------------------------------- |
| 0    | API  | auth   | ログインやトークンなどユーザー判別 |
| 1    | API  | chat   | チャットルーム管理                 |
| 2    | API  | friend | ユーザーのフレンド関連処理         |
| 3    | API  | user   | ユーザーの情報処理                 |

## 繰り返し

### auth

| Method | アクセスURI    | 概要                         |
| ------ | -------------- | ---------------------------- |
| Post   | /auth/register | 会員登録                     |
| Post   | /auth/login    | ログイン                     |
| Get    | /auth/check    | ユーザーのログイン状態を確認 |

### chat

| Method | アクセスURI  | 概要                                           |
| ------ | ------------ | ---------------------------------------------- |
| Post   | /chat/create | チャットルームを作る                           |
| Get    | /chat/room   | ユーザーが入っているチャットルームを検索、返却 |
| Post   | /chat/search | ユーザーと相手のチャットルーム情報を返却       |

### friend

| Method | アクセスURI    | 概要                           |
| ------ | -------------- | ------------------------------ |
| Post   | /friend        | フレンド登録                   |
| Get    | /friend        | 別名でフレンドを検索、返却     |
| Post   | /friend/search | Emailでフレンドを検索、返却    |
| Get    | /friend/search | ユーザーの全てのフレンドを返却 |

### user

| Method | アクセスURI | 概要                                       |
| ------ | ----------- | ------------------------------------------ |
| Put    | /user       | ユーザー情報修正(状態メッセージ、イメージ) |

## データベース構造

### User

| Key      | 資料形 | 概要                                |
| -------- | ------ | ----------------------------------- |
| email    | String | ログインに要るEmail                 |
| password | String | ログインに要るパスワード            |
| friends  | Array  | フレンドの別名を持つ配列            |
| nickname | String | ユーザーの別名                      |
| image    | String | ユーザーのプロフィールイメージのURI |
| message  | String | ユーザーの状態メッセージ            |

### Room

| Key      | 資料形 | 概要                                                  |
| -------- | ------ | ----------------------------------------------------- |
| id       | Number | ルームのID                                            |
| password | String | 秘密ルームで設定した場合使うパスワード.デフォルトは"" |
| message  | Array  | ルームで行われたチャットを保存                        |

